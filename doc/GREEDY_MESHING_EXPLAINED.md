# Greedy Meshing: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

**–î–∞—Ç–∞:** 22 —è–Ω–≤–∞—Ä—è 2026  
**–¶–µ–ª—å:** –û–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å Greedy Meshing –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ø—Ä–æ—â—ë–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

---

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ Greedy Meshing?

**Greedy Meshing** ‚Äî —ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–æ–∫—Å–µ–ª—å–Ω—ã—Ö –º–µ—à–µ–π, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ –≥—Ä–∞–Ω–∏ –≤ –±–æ–ª—å—à–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ (quads) –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≥—Ä–∞–Ω–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞.

### –ü—Ä–∏–º–µ—Ä

**–ë–µ–∑ Greedy Meshing:**
```
–°—Ç–µ–Ω–∞ 10x10 –±–ª–æ–∫–æ–≤ = 100 –≥—Ä–∞–Ω–µ–π = 200 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤
```

**–° Greedy Meshing:**
```
–°—Ç–µ–Ω–∞ 10x10 –±–ª–æ–∫–æ–≤ = 1 –≥—Ä–∞–Ω—å (quad) = 2 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 100x –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤! üöÄ

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

–í –∏–≥—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞—Ç–ª–∞—Å** ‚Äî –æ–¥–Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª–æ—Ç–∞–º–∏:

```
–ê—Ç–ª–∞—Å: 192x16 –ø–∏–∫—Å–µ–ª–µ–π (12 —Å–ª–æ—Ç–æ–≤ –ø–æ 16px)

[Noise][Leaves][Planks][CT_Top][CT_Side][CT_Bot][Coal][Iron][Furnace_Front][Furnace_Side][Furnace_Top][Empty]
  0-16   16-32   32-48   48-64   64-80  80-96  96-112 112-128  128-144      144-160      160-176    176-192
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

–ö–∞–∂–¥–∞—è –≥—Ä–∞–Ω—å –±–ª–æ–∫–∞ –∏–º–µ–µ—Ç UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å–ª–æ—Ç –≤ –∞—Ç–ª–∞—Å–µ:

```typescript
// –ü—Ä–∏–º–µ—Ä: –≥—Ä–∞–Ω—å —Ç—Ä–∞–≤—ã (slot 0)
const uvStep = 1.0 / 12; // 0.0833...
const u0 = uvStep * 0;   // 0.0
const u1 = uvStep * 1;   // 0.0833

// UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥—Ä–∞–Ω–∏ (4 –≤–µ—Ä—à–∏–Ω—ã):
uvs.push(u0, 0, u1, 0, u0, 1, u1, 1);
//       ‚Üë     ‚Üë     ‚Üë     ‚Üë
//       BL    BR    TL    TR
```

### –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ –≥—Ä–∞–Ω–µ–π

–ö–æ–≥–¥–∞ Greedy Meshing –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä–∞–Ω–µ–π –≤ –æ–¥–∏–Ω quad, UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã **—Ä–∞—Å—Ç—è–≥–∏–≤–∞—é—Ç—Å—è**:

```
–ë–µ–∑ Greedy Meshing:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ UV  ‚îÇ UV  ‚îÇ UV  ‚îÇ  ‚Üê –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –∏–º–µ–µ—Ç UV (0.0 - 0.0833)
‚îÇ0-0.08‚îÇ0-0.08‚îÇ0-0.08‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–° Greedy Meshing:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       UV          ‚îÇ  ‚Üê –û–¥–∏–Ω quad —Å UV (0.0 - 0.0833)
‚îÇ    0 - 0.0833     ‚îÇ  ‚Üê –¢–µ–∫—Å—Ç—É—Ä–∞ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 3 –±–ª–æ–∫–∞!
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–∫—Å—Ç—É—Ä–∞ —Ä–∞–∑–º–∞–∑—ã–≤–∞–µ—Ç—Å—è, –≤—ã–≥–ª—è–¥–∏—Ç —É–∂–∞—Å–Ω–æ! üò±

---

## üí° –†–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### –†–µ—à–µ–Ω–∏–µ 1: –ö–∞—Å—Ç–æ–º–Ω—ã–π —à–µ–π–¥–µ—Ä (—Å–ª–æ–∂–Ω–æ)

**–ò–¥–µ—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —à–µ–π–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞–ø–ø–∏—Ç UV –Ω–∞ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –≥—Ä–∞–Ω–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–µ—Ä–µ–¥–∞—Ç—å –≤ —à–µ–π–¥–µ—Ä —Ä–∞–∑–º–µ—Ä quad (width, height)
2. –í —à–µ–π–¥–µ—Ä–µ –≤—ã—á–∏—Å–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ UV –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fract()` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Ç–µ–∫—Å—Ç—É—Ä—ã

**–ü—Ä–∏–º–µ—Ä —à–µ–π–¥–µ—Ä–∞:**
```glsl
// Vertex shader
varying vec2 vUv;
varying vec2 vQuadSize; // –†–∞–∑–º–µ—Ä quad –≤ –±–ª–æ–∫–∞—Ö

void main() {
  vUv = uv;
  vQuadSize = quadSize; // –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}

// Fragment shader
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vQuadSize;

void main() {
  // –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç—É—Ä—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
  vec2 repeatedUV = fract(vUv * vQuadSize);
  
  // –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ —Å–ª–æ—Ç –∞—Ç–ª–∞—Å–∞
  float slot = 0.0; // –ù–æ–º–µ—Ä —Å–ª–æ—Ç–∞
  float uvStep = 1.0 / 12.0;
  vec2 atlasUV = vec2(
    slot * uvStep + repeatedUV.x * uvStep,
    repeatedUV.y
  );
  
  gl_FragColor = texture2D(map, atlasUV);
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚ùå –ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (quadSize)
- ‚ùå –õ–æ–º–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å–∏—Å—Ç–µ–º—É vertex colors
- ‚ùå –°–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚ùå –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –±–ª–æ–∫–∞–º–∏ (crafting table, furnace)

**–í—ã–≤–æ–¥:** –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

---

### –†–µ—à–µ–Ω–∏–µ 2: –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π Greedy Meshing (—Å—Ä–µ–¥–Ω–µ)

**–ò–¥–µ—è:** –û–±—ä–µ–¥–∏–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –≥—Ä–∞–Ω–∏ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤** —Å **–æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ç–µ–∫—Å—Ç—É—Ä–æ–π**, —Ä–∞—Å—Ç—è–≥–∏–≤–∞—è UV –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è (–ø–æ –æ—Å–∏ X, Y, Z):
   - –°–æ–∑–¥–∞—Ç—å –º–∞—Å–∫—É –≥—Ä–∞–Ω–µ–π
   - –û–±—ä–µ–¥–∏–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –≥—Ä–∞–Ω–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º `type` –∏ `side`
   - –ù–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
   - –†–∞—Å—Ç—è–Ω—É—Ç—å UV –Ω–∞ —Ä–∞–∑–º–µ—Ä –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞

**–ü—Ä–∏–º–µ—Ä:**

```
–°—Ç–µ–Ω–∞ –∏–∑ 10x10 –±–ª–æ–∫–æ–≤ —Ç—Ä–∞–≤—ã:

–ë–µ–∑ Greedy Meshing:
100 –≥—Ä–∞–Ω–µ–π √ó 2 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ = 200 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤

–° —É–ø—Ä–æ—â—ë–Ω–Ω—ã–º Greedy Meshing:
1 quad √ó 2 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ = 2 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞

UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:
u0 = 0.0, u1 = 0.0833 (slot 0)
v0 = 0.0, v1 = 1.0

–¢–µ–∫—Å—Ç—É—Ä–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 10x10 —Ä–∞–∑ (—á–µ—Ä–µ–∑ repeat –≤ Three.js)
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```typescript
private buildGreedyMesh(
  data: Uint8Array,
  cx: number,
  cz: number,
  chunkSize: number,
  chunkHeight: number,
  getNeighborBlock: (x: number, y: number, z: number) => number,
): THREE.Mesh {
  const positions: number[] = [];
  const normals: number[] = [];
  const uvs: number[] = [];
  const colors: number[] = [];

  // –î–ª—è –∫–∞–∂–¥–æ–π –æ—Å–∏ (X, Y, Z)
  for (const axis of [0, 1, 2]) {
    // –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è –≤–¥–æ–ª—å –æ—Å–∏
    for (let d = 0; d < chunkSize; d++) {
      // –°–æ–∑–¥–∞—Ç—å –º–∞—Å–∫—É –≥—Ä–∞–Ω–µ–π
      const mask = this.createFaceMask(data, axis, d, chunkSize, chunkHeight);
      
      // –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ –≥—Ä–∞–Ω–∏
      this.greedyMerge(mask, axis, d, positions, normals, uvs, colors);
    }
  }

  return this.createMesh(positions, normals, uvs, colors, cx * chunkSize, cz * chunkSize);
}

private createFaceMask(
  data: Uint8Array,
  axis: number,
  d: number,
  chunkSize: number,
  chunkHeight: number,
): (number | null)[][] {
  const mask: (number | null)[][] = [];
  
  // –†–∞–∑–º–µ—Ä—ã –º–∞—Å–∫–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ—Å–∏
  const [width, height] = axis === 1 
    ? [chunkSize, chunkSize]  // Y-axis
    : [chunkSize, chunkHeight]; // X/Z-axis
  
  for (let i = 0; i < width; i++) {
    mask[i] = [];
    for (let j = 0; j < height; j++) {
      // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–ª–æ–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Å–∏
      const [x, y, z] = this.getCoords(axis, d, i, j);
      
      const blockType = data[this.getBlockIndex(x, y, z)];
      
      if (blockType === BLOCK.AIR) {
        mask[i][j] = null;
        continue;
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–Ω–∞ –ª–∏ –≥—Ä–∞–Ω—å (–µ—Å—Ç—å –ª–∏ —Å–æ—Å–µ–¥)
      const [nx, ny, nz] = this.getNeighborCoords(axis, d, i, j);
      const neighborType = this.getBlock(nx, ny, nz);
      
      if (this.isTransparent(neighborType)) {
        mask[i][j] = blockType; // –ì—Ä–∞–Ω—å –Ω—É–∂–Ω–∞
      } else {
        mask[i][j] = null; // –ì—Ä–∞–Ω—å –Ω–µ –Ω—É–∂–Ω–∞ (–∑–∞–∫—Ä—ã—Ç–∞ —Å–æ—Å–µ–¥–æ–º)
      }
    }
  }
  
  return mask;
}

private greedyMerge(
  mask: (number | null)[][],
  axis: number,
  d: number,
  positions: number[],
  normals: number[],
  uvs: number[],
  colors: number[],
): void {
  const [width, height] = [mask.length, mask[0].length];
  
  for (let j = 0; j < height; j++) {
    for (let i = 0; i < width; ) {
      const blockType = mask[i][j];
      
      if (blockType === null) {
        i++;
        continue;
      }
      
      // –ù–∞–π—Ç–∏ —à–∏—Ä–∏–Ω—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ (–≤–¥–æ–ª—å i)
      let w = 1;
      while (i + w < width && mask[i + w][j] === blockType) {
        w++;
      }
      
      // –ù–∞–π—Ç–∏ –≤—ã—Å–æ—Ç—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ (–≤–¥–æ–ª—å j)
      let h = 1;
      while (j + h < height) {
        let canExtend = true;
        for (let k = 0; k < w; k++) {
          if (mask[i + k][j + h] !== blockType) {
            canExtend = false;
            break;
          }
        }
        if (!canExtend) break;
        h++;
      }
      
      // –î–æ–±–∞–≤–∏—Ç—å quad (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ w √ó h)
      this.addGreedyQuad(
        positions, normals, uvs, colors,
        axis, d, i, j, w, h, blockType
      );
      
      // –û—á–∏—Å—Ç–∏—Ç—å –º–∞—Å–∫—É (–ø–æ–º–µ—Ç–∏—Ç—å –≥—Ä–∞–Ω–∏ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ)
      for (let jj = 0; jj < h; jj++) {
        for (let ii = 0; ii < w; ii++) {
          mask[i + ii][j + jj] = null;
        }
      }
      
      i += w; // –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–ª–æ–∫—É
    }
  }
}

private addGreedyQuad(
  positions: number[],
  normals: number[],
  uvs: number[],
  colors: number[],
  axis: number,
  d: number,
  i: number,
  j: number,
  width: number,
  height: number,
  blockType: number,
): void {
  // –í—ã—á–∏—Å–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–µ—Ä—à–∏–Ω quad
  const [x0, y0, z0] = this.getCoords(axis, d, i, j);
  const [x1, y1, z1] = this.getCoords(axis, d, i + width, j + height);
  
  // –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—à–∏–Ω—ã (4 –≤–µ—Ä—à–∏–Ω—ã –¥–ª—è quad)
  // ... (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Å–∏)
  
  // UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: —Ä–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ —Ä–∞–∑–º–µ—Ä quad
  const { u0, u1 } = this.getUVCoords(blockType, this.getSide(axis));
  
  // –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç—É—Ä—É width √ó height —Ä–∞–∑
  uvs.push(
    u0, 0,           // BL
    u1, 0,           // BR
    u0, height,      // TL (—Ä–∞—Å—Ç—è–Ω—É—Ç—å –ø–æ –≤—ã—Å–æ—Ç–µ)
    u1, height       // TR
  );
  
  // –¶–≤–µ—Ç–∞
  const { r, g, b } = this.getBlockColor(blockType, this.getSide(axis));
  for (let k = 0; k < 4; k++) {
    colors.push(r, g, b);
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –¢–µ–∫—Å—Ç—É—Ä–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è (–Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `texture.wrapS/wrapT = THREE.RepeatWrapping`)
- ‚ö†Ô∏è –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –±–ª–æ–∫–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç—É—Ä–∞–º–∏ –Ω–∞ –≥—Ä–∞–Ω—è—Ö (crafting table, furnace)
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (200-300 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —à–µ–π–¥–µ—Ä–æ–≤
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π vertex colors
- ‚úÖ 3-5x –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ (–¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –±–ª–æ–∫–æ–≤)

**–í—ã–≤–æ–¥:** –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω–∏–π —ç—Ñ—Ñ–µ–∫—Ç.

---

### –†–µ—à–µ–Ω–∏–µ 3: –£–ª—É—á—à–µ–Ω–Ω—ã–π Face Culling (–ø—Ä–æ—Å—Ç–æ)

**–ò–¥–µ—è:** –í–º–µ—Å—Ç–æ Greedy Meshing, —É–ª—É—á—à–∏—Ç—å —Ç–µ–∫—É—â–∏–π Face Culling –¥–ª—è –æ—Ç—Å–µ—á–µ–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥—Ä–∞–Ω–µ–π.

**–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**

#### 1. –û—Ç—Å–µ—á–µ–Ω–∏–µ –≥—Ä–∞–Ω–µ–π –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —á–∞–Ω–∫–æ–≤

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
–ì—Ä–∞–Ω–∏ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —á–∞–Ω–∫–æ–≤ –Ω–µ –æ—Ç—Å–µ–∫–∞—é—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–æ—Å–µ–¥–Ω–∏–π —á–∞–Ω–∫ –∑–∞–≥—Ä—É–∂–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
private shouldRenderFace(
  worldX: number,
  worldY: number,
  worldZ: number,
  side: string,
  getNeighborBlock: (x: number, y: number, z: number) => number,
): boolean {
  // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ—Å–µ–¥–∞
  const [nx, ny, nz] = this.getNeighborCoords(worldX, worldY, worldZ, side);
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å–µ–¥–∞ (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –≤ –¥—Ä—É–≥–æ–º —á–∞–Ω–∫–µ)
  const neighborType = getNeighborBlock(nx, ny, nz);
  
  return this.isTransparent(neighborType);
}
```

**–≠—Ñ—Ñ–µ–∫—Ç:** 5-10% –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤

#### 2. –û—Ç—Å–µ—á–µ–Ω–∏–µ –≥—Ä–∞–Ω–µ–π –ø–æ–¥ –∑–µ–º–ª—ë–π

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
–ë–ª–æ–∫–∏ –ø–æ–¥ –∑–µ–º–ª—ë–π —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–∫—Ä—É–∂–µ–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
private isBlockFullyEnclosed(
  worldX: number,
  worldY: number,
  worldZ: number,
  getNeighborBlock: (x: number, y: number, z: number) => number,
): boolean {
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ 6 —Å–æ—Å–µ–¥–µ–π
  const neighbors = [
    getNeighborBlock(worldX, worldY + 1, worldZ), // top
    getNeighborBlock(worldX, worldY - 1, worldZ), // bottom
    getNeighborBlock(worldX, worldY, worldZ + 1), // front
    getNeighborBlock(worldX, worldY, worldZ - 1), // back
    getNeighborBlock(worldX + 1, worldY, worldZ), // right
    getNeighborBlock(worldX - 1, worldY, worldZ), // left
  ];
  
  // –ï—Å–ª–∏ –≤—Å–µ —Å–æ—Å–µ–¥–∏ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ ‚Üí –±–ª–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç
  return neighbors.every(n => !this.isTransparent(n));
}

// –í buildMesh():
if (this.isBlockFullyEnclosed(worldX, y, worldZ, getNeighborBlock)) {
  continue; // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –±–ª–æ–∫ (–Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤–æ–æ–±—â–µ)
}
```

**–≠—Ñ—Ñ–µ–∫—Ç:** 10-15% –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤

#### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–æ—Å–µ–¥–µ–π

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `getNeighborBlock()` 6 —Ä–∞–∑ ‚Üí –º–µ–¥–ª–µ–Ω–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫
private neighborCache: Map<string, number> = new Map();

private getNeighborCached(
  x: number,
  y: number,
  z: number,
  getNeighborBlock: (x: number, y: number, z: number) => number,
): number {
  const key = `${x},${y},${z}`;
  
  if (!this.neighborCache.has(key)) {
    this.neighborCache.set(key, getNeighborBlock(x, y, z));
  }
  
  return this.neighborCache.get(key)!;
}

// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–µ—à–∞
this.neighborCache.clear();
```

**–≠—Ñ—Ñ–µ–∫—Ç:** 20-30% –±—ã—Å—Ç—Ä–µ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ—à–∞

**–ò—Ç–æ–≥–æ:** 10-20% –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, 20-30% –±—ã—Å—Ç—Ä–µ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ.

**–í—ã–≤–æ–¥:** –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–µ–±–æ–ª—å—à–æ–π —ç—Ñ—Ñ–µ–∫—Ç, –Ω–æ –±–µ–∑ —Ä–∏—Å–∫–æ–≤.

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

| –†–µ—à–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –≠—Ñ—Ñ–µ–∫—Ç | –†–∏—Å–∫–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|--------|-------|--------------|
| –ö–∞—Å—Ç–æ–º–Ω—ã–π —à–µ–π–¥–µ—Ä | üî¥ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | üü¢ 5-10x | üî¥ –í—ã—Å–æ–∫–∏–µ | ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π Greedy | üü° –°—Ä–µ–¥–Ω—è—è | üü° 3-5x | üü° –°—Ä–µ–¥–Ω–∏–µ | ‚ö†Ô∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| –£–ª—É—á—à–µ–Ω–Ω—ã–π Culling | üü¢ –ù–∏–∑–∫–∞—è | üü° 1.1-1.2x | üü¢ –ù–∏–∑–∫–∏–µ | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –£–ª—É—á—à–µ–Ω–Ω—ã–π Face Culling (2-3 —á–∞—Å–∞)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç—Å–µ—á–µ–Ω–∏–µ –≥—Ä–∞–Ω–µ–π –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —á–∞–Ω–∫–æ–≤
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç—Å–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç—ã—Ö –±–ª–æ–∫–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–æ—Å–µ–¥–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 10-20% –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, –ø—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.

---

### –≠—Ç–∞–ø 2: –û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ (30 –º–∏–Ω—É—Ç)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π

1. –ò–∑–º–µ—Ä–∏—Ç—å FPS –¥–æ –∏ –ø–æ—Å–ª–µ
2. –ò–∑–º–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ö (—Ä–∞–≤–Ω–∏–Ω—ã, –≥–æ—Ä—ã, –ø–æ–¥–∑–µ–º–µ–ª—å—è)

**–ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω (FPS < 60):**
‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≠—Ç–∞–ø—É 3

**–ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω (FPS ‚â• 60):**
‚Üí –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è, —Ñ–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á–∞—Ö

---

### –≠—Ç–∞–ø 3: –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π Greedy Meshing (8-12 —á–∞—Å–æ–≤)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ –ù–∏–∑–∫–∏–π (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ Greedy Meshing
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä
3. –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 3-5x –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, –Ω–æ —Å–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ Greedy Meshing –æ–∫–∞–∂–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–º, –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

### 1. LOD (Level of Detail)
- –î–∞–ª—å–Ω–∏–µ —á–∞–Ω–∫–∏ ‚Üí —É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –º–µ—à–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ LOD
- **–≠—Ñ—Ñ–µ–∫—Ç:** 30-50% –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤

### 2. Occlusion Culling
- –ù–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —á–∞–Ω–∫–∏ –∑–∞ –¥—Ä—É–≥–∏–º–∏ —á–∞–Ω–∫–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å BVH (Bounding Volume Hierarchy)
- **–≠—Ñ—Ñ–µ–∫—Ç:** 20-40% –º–µ–Ω—å—à–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤

### 3. Instancing –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä
- –î–µ—Ä–µ–≤—å—è, –∫–∞–º–Ω–∏, —Ç—Ä–∞–≤–∞ ‚Üí instanced meshes
- **–≠—Ñ—Ñ–µ–∫—Ç:** 50-70% –º–µ–Ω—å—à–µ draw calls

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `TODO_WORLD_GENERATION.md` ‚Äî TODO –ª–∏—Å—Ç
- `doc/WORLD_GENERATION_ANALYSIS.md` ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `doc/WORLD_GENERATION_IMPROVEMENTS.md` ‚Äî –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Greedy Meshing in Minecraft](https://0fps.net/2012/06/30/meshing-in-a-minecraft-game/)
- [Culled Meshing](https://tomcc.github.io/2014/08/31/visibility-1.html)
- [Voxel Rendering Techniques](https://sites.google.com/site/letsmakeavoxelengine/home/meshing)
